<html>
  <head>
    <!-- Load c3.css -->
    <link href="/vendor/c3/c3.min.css" rel="stylesheet" type="text/css">

    <!-- Load d3.js and c3.js -->
    <script src="/vendor/d3/d3.min.js" charset="utf-8"></script>
    <script src="/vendor/c3/c3.min.js"></script>
    <script src="/vendor/jquery/dist/jquery.min.js"></script>
    <script src="/vendor/underscore/underscore-min.js"></script>
    <script>
      $(function() {
        $.getJSON('/perf/data.json')
          .done(function(data){
            
            console.log('data');

            var labels = _.map(data, function(stats) { 
              return new Date(stats.start);
            });
            var avgResponseTime = ['avgResponseTime'].concat(
              _.map(data, function(stats) { 
                return stats.avg; 
              })
            );
            var minResponseTime = ['minResponseTime'].concat(
              _.map(data, function(stats) { 
                return stats.min; 
              })
            );
            var maxResponseTime = ['maxResponseTime'].concat(
              _.map(data, function(stats) { 
                return stats.max; 
              })
            );
            
            var chart = c3.generate({
                data: {
                    columns: [
                      avgResponseTime,
                      minResponseTime,
                      maxResponseTime
                    ]
                },
                axis: {
                    x: {
                        type: 'category',
                        categories: labels
                    }
                }
            });
          });
        });
    </script>
  </head>
  <body>
    <div id="chart"></div>

  </body>
</html>